Index: linux-2.6.20-arm/arch/arm/mach-ixp4xx/dsmg600-setup.c
===================================================================
--- linux-2.6.20-arm.orig/arch/arm/mach-ixp4xx/dsmg600-setup.c	2007-03-20 00:31:55.000000000 -0800
+++ linux-2.6.20-arm/arch/arm/mach-ixp4xx/dsmg600-setup.c	2007-03-20 00:38:53.000000000 -0800
@@ -131,7 +131,6 @@
 
 static void __init dsmg600_init(void)
 {
-        ixp4xx_timer_freq = DSMG600_FREQ;
 	ixp4xx_sys_init();
 
 	/* Make sure that GPIO14 and GPIO15 are not used as clocks */
@@ -157,11 +156,18 @@
 #endif
 }
 
+static void __init dsmg600_fixup(void)
+{
+       /* The xtal on this machine is non-standard. */
+        ixp4xx_timer_freq = DSMG600_FREQ;
+}
+
 MACHINE_START(DSMG600, "D-Link DSM-G600 RevA")
 	/* Maintainer: www.nslu2-linux.org */
 	.phys_io	= IXP4XX_PERIPHERAL_BASE_PHYS,
 	.io_pg_offst	= ((IXP4XX_PERIPHERAL_BASE_VIRT) >> 18) & 0xFFFC,
 	.boot_params	= 0x00000100,
+	.fixup          = dsmg600_fixup,
 	.map_io		= ixp4xx_map_io,
 	.init_irq	= ixp4xx_init_irq,
 	.timer          = &ixp4xx_timer,
