 include/modules/ioMem/IxOsalIoMem.h                                 |    4 ++--
 include/modules/ioMem/IxOsalMemAccess.h                             |    2 +-
 os/linux/include/platforms/ixp400/IxOsalOsIxp400CustomizedMapping.h |    2 +-
 os/linux/include/platforms/ixp400/ixp425/IxOsalOsIxp425Sys.h        |    5 +++--
 os/linux/src/modules/ioMem/IxOsalOsIoMem.c                          |    2 ++
 5 files changed, 9 insertions(+), 6 deletions(-)

Index: ixp_osal/include/modules/ioMem/IxOsalIoMem.h
===================================================================
--- ixp_osal.orig/include/modules/ioMem/IxOsalIoMem.h
+++ ixp_osal/include/modules/ioMem/IxOsalIoMem.h
@@ -117,8 +117,8 @@
 #endif /* ndef __wince */
 
 #define IX_OSAL_SWAP_SHORT(sData)         ((sData >> 8) | ((sData & 0xFF) << 8))
-#define IX_OSAL_SWAP_SHORT_ADDRESS(sAddr) ((sAddr) ^ 0x2)
-#define IX_OSAL_SWAP_BYTE_ADDRESS(bAddr)  ((bAddr) ^ 0x3)
+#define IX_OSAL_SWAP_SHORT_ADDRESS(sAddr) ((UINT16*)((UINT32)(sAddr) ^ 0x2))
+#define IX_OSAL_SWAP_BYTE_ADDRESS(bAddr)  ((UINT8*)((UINT32)(bAddr) ^ 0x3))
 
 #define IX_OSAL_BE_XSTOBUSL(wData)  (wData)
 #define IX_OSAL_BE_XSTOBUSS(sData)  (sData)
Index: ixp_osal/include/modules/ioMem/IxOsalMemAccess.h
===================================================================
--- ixp_osal.orig/include/modules/ioMem/IxOsalMemAccess.h
+++ ixp_osal/include/modules/ioMem/IxOsalMemAccess.h
@@ -84,7 +84,7 @@
 
 #elif defined (IX_OSAL_LINUX_LE)
 
-#define IX_SDRAM_LE_DATA_COHERENT
+#define IX_SDRAM_LE_ADDRESS_COHERENT
 
 #elif defined (IX_OSAL_WINCE_LE)
 
Index: ixp_osal/os/linux/include/platforms/ixp400/IxOsalOsIxp400CustomizedMapping.h
===================================================================
--- ixp_osal.orig/os/linux/include/platforms/ixp400/IxOsalOsIxp400CustomizedMapping.h
+++ ixp_osal/os/linux/include/platforms/ixp400/IxOsalOsIxp400CustomizedMapping.h
@@ -171,7 +171,7 @@
  ***************************/
 #if (IX_COMPONENT_NAME == ix_qmgr)
 
-#define IX_OSAL_LE_DC_MAPPING
+#define IX_OSAL_LE_AC_MAPPING
 
 #endif /* qmgr */
 
Index: ixp_osal/os/linux/include/platforms/ixp400/ixp425/IxOsalOsIxp425Sys.h
===================================================================
--- ixp_osal.orig/os/linux/include/platforms/ixp400/ixp425/IxOsalOsIxp425Sys.h
+++ ixp_osal/os/linux/include/platforms/ixp400/ixp425/IxOsalOsIxp425Sys.h
@@ -87,6 +87,7 @@
 #endif /* IX_OSAL_OS_LINUX_VERSION_2_6 */
 
 /* Expansion Bus */
+#define IXP4XX_EXP_BUS_CSX_REGION_SIZE       (0x01000000)
 #ifdef IX_OSAL_OS_LINUX_VERSION_2_6
 #define IX_OSAL_IXP400_EXP_BUS_MAP_SIZE		(IXP4XX_EXP_BUS_CSX_REGION_SIZE*8)
 #else
@@ -134,7 +135,7 @@
      ixOsalLinuxMemMap,			/* mapFunction     */
      ixOsalLinuxMemUnmap,		/* unmapFunction   */
      0,					/* refCount        */
-     IX_OSAL_BE | IX_OSAL_LE_DC,	/* endianType      */   
+     IX_OSAL_BE | IX_OSAL_LE_AC,	/* endianType      */   
      "qMgr"				/* name            */
      },
 #else
@@ -146,7 +147,7 @@
      NULL,				/* mapFunction     */
      NULL,				/* unmapFunction   */
      0,					/* refCount        */
-     IX_OSAL_BE | IX_OSAL_LE_DC,	/* endianType      */   
+     IX_OSAL_BE | IX_OSAL_LE_AC,	/* endianType      */   
      "qMgr"				/* name            */
      },
 #endif /* IX_OSAL_OS_LINUX_VERSION_2_6 */
Index: ixp_osal/os/linux/src/modules/ioMem/IxOsalOsIoMem.c
===================================================================
--- ixp_osal.orig/os/linux/src/modules/ioMem/IxOsalOsIoMem.c
+++ ixp_osal/os/linux/src/modules/ioMem/IxOsalOsIoMem.c
@@ -56,6 +56,8 @@
 PUBLIC void
 ixOsalLinuxMemMap (IxOsalMemoryMap * map)
 {
+    /* Linux requires LE mappings to use address coherency */
+    IX_OSAL_ENSURE((map->mapEndianType & IX_OSAL_LE_DC) == 0, "LE Data Coherency not supported");
     map->virtualAddress = (UINT32) ioremap (map->physicalAddress, map->size);
 }
 
