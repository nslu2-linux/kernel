NEW_LEDS support for the IOMega NAS100D

Signed-off-by: John Bowler <jbowler@acm.org>

Index: linux-2.6.17/arch/arm/mach-ixp4xx/nas100d-setup.c
===================================================================
--- linux-2.6.17.orig/arch/arm/mach-ixp4xx/nas100d-setup.c	2006-06-19 12:34:15.662448280 +0930
+++ linux-2.6.17/arch/arm/mach-ixp4xx/nas100d-setup.c	2006-06-19 12:40:57.474363584 +0930
@@ -15,6 +15,7 @@
 #include <linux/kernel.h>
 #include <linux/serial.h>
 #include <linux/serial_8250.h>
+#include <linux/leds.h>
 
 #include <asm/mach-types.h>
 #include <asm/mach/arch.h>
@@ -37,6 +38,36 @@
 	.resource		= &nas100d_flash_resource,
 };
 
+#ifdef CONFIG_LEDS_CLASS
+static struct resource nas100d_led_resources[] = {
+	{
+		.name		= "wlan",   /* green led */
+		.start		= 0,
+		.end		= 0,
+		.flags		= IXP4XX_GPIO_LOW,
+	},
+	{
+		.name		= "ready",  /* blue power led (off is flashing!) */
+		.start		= 15,
+		.end		= 15,
+		.flags		= IXP4XX_GPIO_LOW,
+	},
+	{
+		.name		= "disk",   /* yellow led */
+		.start		= 3,
+		.end		= 3,
+		.flags		= IXP4XX_GPIO_LOW,
+	},
+};
+
+static struct platform_device nas100d_leds = {
+	.name			= "IXP4XX-GPIO-LED",
+	.id			= -1,
+	.num_resources		= ARRAY_SIZE(nas100d_led_resources),
+	.resource		= nas100d_led_resources,
+};
+#endif
+
 static struct ixp4xx_i2c_pins nas100d_i2c_gpio_pins = {
 	.sda_pin		= NAS100D_SDA_PIN,
 	.scl_pin		= NAS100D_SCL_PIN,
@@ -96,6 +127,9 @@
 	&nas100d_i2c_controller,
 	&nas100d_flash,
 	&nas100d_uart,
+#ifdef CONFIG_LEDS_CLASS
+	&nas100d_leds,
+#endif
 };
 
 static void nas100d_power_off(void)
