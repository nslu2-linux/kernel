Fixes in this patch:
 - Fix endian issue in queue manager code

--- a/drivers/net/ixp4xx/qmgr_eth.c	7 Sep 2006 14:59:35 -0000	1.1
+++ b/drivers/net/ixp4xx/qmgr_eth.c	26 Sep 2006 13:37:25 -0000
@@ -95,12 +95,12 @@
 
 int queue_drain(struct qm_queue *queue)
 {
-	u32 phys = queue_get_entry(queue);
+	u32 phys = be32_to_cpu(*queue->acc_reg) & ~0xf;
 	struct npe_cont *cont;
 
 	if (!phys)
 		return 0;
-	cont = dma_to_virt(queue->dev, be32_to_cpu(phys));
+	cont = dma_to_virt(queue->dev, phys);
 	cont = cont->virt;
 	dev_kfree_skb_any(cont->h.skb);
 	qmgr_return_cont(dev_get_drvdata(queue->dev), cont);
@@ -109,7 +109,7 @@
 
 struct sk_buff *queue_return_skb(struct qm_queue *queue)
 {
-	u32 phys = queue_get_entry(queue);
+	u32 phys = be32_to_cpu(*queue->acc_reg) & ~0xf;
 	struct sk_buff *skb;
 	struct npe_cont *cont;
 	int len, buflen;
@@ -117,7 +117,7 @@
 	if (!phys)
 		return NULL;
 
-	cont = dma_to_virt(queue->dev, be32_to_cpu(phys));
+	cont = dma_to_virt(queue->dev, phys);
 	cont = cont->virt;
 	skb = cont->h.skb;
 	buflen = be16_to_cpu(cont->ctl.eth.buf_len);
--- a/include/linux/ixp_qmgr.h	15 Sep 2006 08:30:51 -0000	1.3
+++ b/include/linux/ixp_qmgr.h	26 Sep 2006 13:37:25 -0000
@@ -125,11 +125,6 @@
 	*(queue->acc_reg) = entry;
 }
 
-static inline u32 queue_get_entry(struct qm_queue *queue)
-{
-	return *queue->acc_reg & ~0xf;
-}
-
 static inline struct npe_cont *qmgr_get_cont(struct qm_qmgr *qmgr)
 {
 	unsigned long flags;
