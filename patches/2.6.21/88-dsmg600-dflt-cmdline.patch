Index: linux-2.6.21-rc4-arm/arch/arm/mach-ixp4xx/dsmg600-setup.c
===================================================================
--- linux-2.6.21-rc4-arm.orig/arch/arm/mach-ixp4xx/dsmg600-setup.c	2007-03-20 01:03:26.000000000 -0800
+++ linux-2.6.21-rc4-arm/arch/arm/mach-ixp4xx/dsmg600-setup.c	2007-03-20 01:08:40.000000000 -0800
@@ -158,6 +158,10 @@
 }
 
 static char dsmg600_rtc_probe[] __initdata = "rtc-pcf8563.probe=0,0x51 ";
+
+static char dsmg600_default_cmdline[] __initdata = 
+	"init=/linuxrc root=/dev/mtdblock2 rootfstype=jffs2 rw "
+	CONFIG_CMDLINE;
         
 static void __init dsmg600_fixup(struct machine_desc *desc,
                 struct tag *tags, char **cmdline, struct meminfo *mi)
@@ -167,6 +171,11 @@
 
         struct tag *t = tags;
         char *p = *cmdline;
+
+	/* A command line in the ATAG list will override this one,
+	 * as is intended.
+	 */
+	strlcpy(*cmdline, dsmg600_default_cmdline, COMMAND_LINE_SIZE);
         
         /* Find the end of the tags table, taking note of any cmdline tag. */
         for (; t->hdr.size; t = tag_next(t)) {
